(this["webpackJsonpbook-tracking-app"]=this["webpackJsonpbook-tracking-app"]||[]).push([[0],{26:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),o=n(19),c=n.n(o),r=(n(26),n(8)),i=n(9),h=n(12),l=n(11),u=n(2),d=n(10),j=n(0),b=function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={isUpdating:!1},e.changeShelf=function(t){e.props.onChangeShelf(e.props.book,t),e.setState({isUpdating:!0})},e}return Object(i.a)(n,[{key:"componentWillReceiveProps",value:function(){this.setState({isUpdating:!1})}},{key:"render",value:function(){var e=this;return Object(j.jsxs)("div",{className:this.state.isUpdating?"dropdown_select loading":"dropdown_select",children:[Object(j.jsxs)("select",{value:this.props.book.shelf,onChange:function(t){return e.changeShelf(t)},children:[Object(j.jsx)("option",{value:"move",disabled:!0,children:"Move to..."}),Object(j.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(j.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(j.jsx)("option",{value:"read",children:"Read"}),Object(j.jsx)("option",{value:"none",children:"None"})]}),this.state.isUpdating&&Object(j.jsx)("div",{className:"loader-two"})]})}}]),n}(a.Component),f=function(e){var t=e.book,n=e.onChangeShelf,a=void 0===t.authors?"Unknown Author":t.authors.join(", ");return Object(j.jsx)("li",{children:Object(j.jsxs)("div",{className:"book",children:[Object(j.jsxs)("div",{className:"top_section",children:[Object(j.jsx)("img",{src:t.imageLinks.thumbnail,className:"book_cover"}),Object(j.jsx)(b,{book:t,onChangeShelf:n})]}),Object(j.jsx)("div",{className:"title",children:t.title}),Object(j.jsx)("div",{className:"authors",children:a})]})})},p=function(e){var t=e.type,n=e.books,a=e.onChangeShelf;return Object(j.jsxs)("div",{className:"book_shelf",children:[Object(j.jsx)("h2",{className:"shelf_name",children:t}),n.length<=0?Object(j.jsx)("div",{className:"empty",children:"No books at present in this shelf."}):Object(j.jsx)("ol",{className:"books",children:n.map((function(e){return Object(j.jsx)(f,{book:e,onChangeShelf:a},e.id)}))})]})},O=n(14),v=n(15),g="https://reactnd-books-api.udacity.com",k=localStorage.token;k||(k=localStorage.token=Math.random().toString(36).substr(-8));var x={Accept:"application/json",Authorization:k},y=function(){return fetch("".concat(g,"/books"),{headers:x}).then((function(e){return e.json()})).then((function(e){return e.books}))},m=function(e,t){return fetch("".concat(g,"/books/").concat(e.id),{method:"PUT",headers:Object(v.a)(Object(v.a)({},x),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))},S=function(e,t){return fetch("".concat(g,"/search"),{method:"POST",headers:Object(v.a)(Object(v.a)({},x),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e,maxResults:t})}).then((function(e){return e.json()})).then((function(e){return e.books}))},C=function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={query:"",searchedBooks:[],isSearching:!1,error:!1},e.updateQuery=function(t){e.setState({query:t.target.value},(function(){e.searchBooks(t)}))},e.searchBooks=function(){var t=e.state.query;t?(e.setState({isSearching:!0}),S(t).then((function(t){t.error?e.setState({searchedBooks:[],isSearching:!1,error:!0}):t&&(e.setState({error:!1}),e.updateBooks(t))}))):e.setState({searchedBooks:[]})},e.updateBooks=function(t){var n,a=e.props.shelvedBooks,s=Object(O.a)(t);try{for(s.s();!(n=s.n()).done;){var o=n.value;o.shelf="none";var c,r=Object(O.a)(a);try{for(r.s();!(c=r.n()).done;){var i=c.value;o.id===i.id&&(o.shelf=i.shelf)}}catch(h){r.e(h)}finally{r.f()}}}catch(h){s.e(h)}finally{s.f()}e.setState({searchedBooks:t,isSearching:!1})},e.updateBook=function(t){var n,a=e.state.searchedBooks,s=Object(O.a)(a);try{for(s.s();!(n=s.n()).done;){var o,c=n.value,r=Object(O.a)(t);try{for(r.s();!(o=r.n()).done;){var i=o.value;c.id===i.id&&(c.shelf=i.shelf)}}catch(h){r.e(h)}finally{r.f()}}}catch(h){s.e(h)}finally{s.f()}e.setState({searchedBooks:a})},e.changeShelf=function(t,n){e.props.onChangeShelf(t,n).then((function(t){return e.updateBook(t)}))},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.state.searchedBooks;return Object(j.jsxs)("div",{className:"search",children:[Object(j.jsxs)("div",{className:"search_bar",children:[Object(j.jsx)(d.b,{to:"/",className:"back",children:"Close"}),Object(j.jsx)("div",{className:"input_container",children:Object(j.jsx)("input",{type:"text",value:this.state.query,placeholder:"Search by title or author",onChange:function(t){return e.updateQuery(t)}})})]}),this.state.error&&!this.state.isSearching&&Object(j.jsx)("div",{className:"results center",children:Object(j.jsx)("h3",{children:"No Results Found"})}),this.state.isSearching?Object(j.jsx)("div",{className:"loader"}):Object(j.jsx)("div",{className:"results",children:Object(j.jsx)("ol",{className:"books_grid",children:t.map((function(t){return Object(j.jsx)(f,{book:t,onChangeShelf:e.changeShelf},t.id)}))})})]})}}]),n}(a.Component),N=(n(36),function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={books:[]},e.shelfChange=function(t,n){return new Promise((function(a){m(t,n.target.value).then((function(t){y().then((function(t){e.setState({books:t},a(t))}))}))}))},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;y().then((function(t){e.setState({books:t})}))}},{key:"render",value:function(){var e=this,t=this.state.books;return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(u.a,{exact:!0,path:"/",render:function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"list_books",children:[Object(j.jsx)("div",{className:"app_header",children:Object(j.jsx)("h1",{children:"MyReads"})}),Object(j.jsx)(p,{type:"Currently Reading",books:t.filter((function(e){return"currentlyReading"===e.shelf})),onChangeShelf:e.shelfChange}),Object(j.jsx)(p,{type:"Want to Read",books:t.filter((function(e){return"wantToRead"===e.shelf})),onChangeShelf:e.shelfChange}),Object(j.jsx)(p,{type:"Read",books:t.filter((function(e){return"read"===e.shelf})),onChangeShelf:e.shelfChange})]}),Object(j.jsx)("div",{className:"add_book",children:Object(j.jsx)(d.b,{to:"/search",children:"Add Book"})})]})}}),Object(j.jsx)(u.a,{path:"/search",render:function(){return Object(j.jsx)(C,{shelvedBooks:t,onChangeShelf:e.shelfChange})}})]})}}]),n}(a.Component)),B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,38)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),o(e),c(e)}))};c.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(d.a,{children:Object(j.jsx)(N,{})})}),document.getElementById("root")),B()}},[[37,1,2]]]);
//# sourceMappingURL=main.e4eb52a1.chunk.js.map