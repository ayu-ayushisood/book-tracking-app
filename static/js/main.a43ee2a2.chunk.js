(this["webpackJsonpbook-tracking-app"]=this["webpackJsonpbook-tracking-app"]||[]).push([[0],{30:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),o=n(21),c=n.n(o),r=(n(30),n(18)),i=n.n(r),h=n(22),l=n(8),u=n(9),d=n(12),j=n(11),b=n(2),f=n(10),p=n(0),O=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={isUpdating:!1},e.changeShelf=function(t){e.props.onChangeShelf(e.props.book,t),e.setState({isUpdating:!0})},e}return Object(u.a)(n,[{key:"componentWillReceiveProps",value:function(){this.setState({isUpdating:!1})}},{key:"render",value:function(){var e=this;return Object(p.jsxs)("div",{className:this.state.isUpdating?"dropdown_select loading":"dropdown_select",children:[Object(p.jsxs)("select",{value:this.props.book.shelf,onChange:function(t){return e.changeShelf(t)},children:[Object(p.jsx)("option",{value:"move",disabled:!0,children:"Move to..."}),Object(p.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(p.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(p.jsx)("option",{value:"read",children:"Read"}),Object(p.jsx)("option",{value:"none",children:"None"})]}),this.state.isUpdating&&Object(p.jsx)("div",{className:"loader-two"})]})}}]),n}(a.Component),v=function(e){var t=e.book,n=e.onChangeShelf,a=void 0===t.authors?"Unknown Author":t.authors.join(", "),s=void 0===t.imageLinks?"https://dummyimage.com/120x220/000/fff.png&text=No+Thumbnail":t.imageLinks.thumbnail;return Object(p.jsx)("li",{children:Object(p.jsxs)("div",{className:"book",children:[Object(p.jsxs)("div",{className:"top_section",children:[Object(p.jsx)("img",{src:s,className:"book_cover"}),Object(p.jsx)(O,{book:t,onChangeShelf:n})]}),Object(p.jsx)("div",{className:"title",children:t.title}),Object(p.jsx)("div",{className:"authors",children:a})]})})},g=function(e){var t=e.type,n=e.books,a=e.onChangeShelf;return Object(p.jsxs)("div",{className:"book_shelf",children:[Object(p.jsx)("h2",{className:"shelf_name",children:t}),n.length<=0?Object(p.jsx)("div",{className:"empty",children:"No books at present in this shelf."}):Object(p.jsx)("ol",{className:"books",children:n.map((function(e){return Object(p.jsx)(v,{book:e,onChangeShelf:a},e.id)}))})]})},k=n(14),x=n(15),m="https://reactnd-books-api.udacity.com",y=localStorage.token;y||(y=localStorage.token=Math.random().toString(36).substr(-8));var S={Accept:"application/json",Authorization:y},C=function(){return fetch("".concat(m,"/books"),{headers:S}).then((function(e){return e.json()})).then((function(e){return e.books}))},N=function(e,t){return fetch("".concat(m,"/books/").concat(e.id),{method:"PUT",headers:Object(x.a)(Object(x.a)({},S),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))},B=n(23),R=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={query:"",searchedBooks:[],isSearching:!1,error:!1},a.updateQuery=function(e){a.setState({query:e.target.value},(function(){a.searchBooks(e)}))},a.searchBooks=function(){var e=a.state.query;e?(a.setState({isSearching:!0}),function(e,t){return fetch("".concat(m,"/search"),{method:"POST",headers:Object(x.a)(Object(x.a)({},S),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e,maxResults:t})}).then((function(e){return e.json()})).then((function(e){return e.books}))}(e).then((function(e){e.error?a.setState({searchedBooks:[],isSearching:!1,error:!0}):e&&(a.setState({error:!1}),a.updateBooks(e))}))):a.setState({searchedBooks:[]})},a.updateBooks=function(e){var t,n=a.props.shelvedBooks,s=Object(k.a)(e);try{for(s.s();!(t=s.n()).done;){var o=t.value;o.shelf="none";var c,r=Object(k.a)(n);try{for(r.s();!(c=r.n()).done;){var i=c.value;o.id===i.id&&(o.shelf=i.shelf)}}catch(h){r.e(h)}finally{r.f()}}}catch(h){s.e(h)}finally{s.f()}a.setState({searchedBooks:e,isSearching:!1})},a.updateBook=function(e){var t,n=a.state.searchedBooks,s=Object(k.a)(n);try{for(s.s();!(t=s.n()).done;){var o,c=t.value,r=Object(k.a)(e);try{for(r.s();!(o=r.n()).done;){var i=o.value;c.id===i.id&&(c.shelf=i.shelf)}}catch(h){r.e(h)}finally{r.f()}}}catch(h){s.e(h)}finally{s.f()}a.setState({searchedBooks:n})},a.changeShelf=function(e,t){a.props.onChangeShelf(e,t).then((function(e){return a.updateBook(e)}))},a.handleInputThrottled=Object(B.throttle)(a.updateQuery,100),a}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=this.state.searchedBooks;return Object(p.jsxs)("div",{className:"search",children:[Object(p.jsxs)("div",{className:"search_bar",children:[Object(p.jsx)(f.b,{to:"/",className:"back",children:"Close"}),Object(p.jsx)("div",{className:"input_container",children:Object(p.jsx)("input",{type:"text",value:this.state.query,placeholder:"Search by title or author",onChange:this.handleInputThrottled})})]}),this.state.error&&!this.state.isSearching&&Object(p.jsx)("div",{className:"results center",children:Object(p.jsx)("h3",{children:"No Results Found"})}),this.state.isSearching?Object(p.jsx)("div",{className:"loader"}):Object(p.jsx)("div",{className:"results",children:Object(p.jsx)("ol",{className:"books_grid",children:t.map((function(t){return Object(p.jsx)(v,{book:t,onChangeShelf:e.changeShelf},t.id)}))})})]})}}]),n}(a.Component),w=(n(41),function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={books:[]},e.shelfChange=function(t,n){return new Promise((function(a){N(t,n.target.value).then((function(t){C().then((function(t){e.setState({books:t},a(t))}))}))}))},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=Object(h.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:t=e.sent,this.setState({books:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.books;return Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)(b.a,{exact:!0,path:"/",render:function(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{className:"list_books",children:[Object(p.jsx)("div",{className:"app_header",children:Object(p.jsx)("h1",{children:"MyReads"})}),Object(p.jsx)(g,{type:"Currently Reading",books:t.filter((function(e){return"currentlyReading"===e.shelf})),onChangeShelf:e.shelfChange}),Object(p.jsx)(g,{type:"Want to Read",books:t.filter((function(e){return"wantToRead"===e.shelf})),onChangeShelf:e.shelfChange}),Object(p.jsx)(g,{type:"Read",books:t.filter((function(e){return"read"===e.shelf})),onChangeShelf:e.shelfChange})]}),Object(p.jsx)("div",{className:"add_book",children:Object(p.jsx)(f.b,{to:"/search",children:"Add Book"})})]})}}),Object(p.jsx)(b.a,{path:"/search",render:function(){return Object(p.jsx)(R,{shelvedBooks:t,onChangeShelf:e.shelfChange})}})]})}}]),n}(a.Component)),_=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,43)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),o(e),c(e)}))};c.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(f.a,{children:Object(p.jsx)(w,{})})}),document.getElementById("root")),_()}},[[42,1,2]]]);
//# sourceMappingURL=main.a43ee2a2.chunk.js.map