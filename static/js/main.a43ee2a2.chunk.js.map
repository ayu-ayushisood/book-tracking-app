{"version":3,"sources":["components/SelectBook.js","components/Book.js","components/Bookshelf.js","api/booksAPI.js","components/Search.js","App.js","reportWebVitals.js","index.js"],"names":["BookShelfChanger","state","isUpdating","changeShelf","event","props","onChangeShelf","book","setState","this","className","value","shelf","onChange","disabled","Component","Book","authors","undefined","join","thumbnail","imageLinks","src","SelectBook","title","Bookshelf","type","books","length","map","id","api","token","localStorage","Math","random","toString","substr","headers","getAll","fetch","then","res","json","data","update","method","body","JSON","stringify","Search","query","searchedBooks","isSearching","error","updateQuery","target","searchBooks","maxResults","updateBooks","shelvedBooks","shelvedBook","updateBook","handleInputThrottled","throttle","to","placeholder","App","shelfChange","e","Promise","resolve","a","exact","path","render","filter","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a43ee2a2.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nclass BookShelfChanger extends Component {\n\tstate = {\n\t\tisUpdating: false\n\t};\n\n\tcomponentWillReceiveProps() {\n\t\tthis.setState({\n\t\t\tisUpdating: false\n\t\t});\n\t}\n\n\tchangeShelf = event => {\n\t\tthis.props.onChangeShelf(this.props.book, event);\n\t\tthis.setState({\n\t\t\tisUpdating: true\n\t\t});\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<div className={this.state.isUpdating ? 'dropdown_select loading' : 'dropdown_select'}>\n\t\t\t\t<select value={this.props.book.shelf} onChange={event => this.changeShelf(event)}>\n\t\t\t\t\t<option value=\"move\" disabled>\n\t\t\t\t\t\tMove to...\n\t\t\t\t\t</option>\n\t\t\t\t\t<option value=\"currentlyReading\">Currently Reading</option>\n\t\t\t\t\t<option value=\"wantToRead\">Want to Read</option>\n\t\t\t\t\t<option value=\"read\">Read</option>\n\t\t\t\t\t<option value=\"none\">None</option>\n\t\t\t\t</select>\n\t\t\t\t{this.state.isUpdating && <div className=\"loader-two\" />}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nBookShelfChanger.propTypes = {\n\tbook: PropTypes.object.isRequired,\n\tonChangeShelf: PropTypes.func.isRequired\n};\n\nexport default BookShelfChanger;","import React from 'react';\nimport SelectBook from './SelectBook';\nimport PropTypes from 'prop-types';\n\nconst Book = props => {\n    const {book, onChangeShelf} = props;\n    const authors = book.authors === undefined ? 'Unknown Author' : book.authors.join(', ');\n    const thumbnail = book.imageLinks === undefined ? `https://dummyimage.com/120x220/000/fff.png&text=No+Thumbnail` : book.imageLinks.thumbnail; \n    return (\n        <li>\n            <div className=\"book\">\n                <div className=\"top_section\">\n                    <img src={thumbnail} className=\"book_cover\"/>\n                    <SelectBook book={book} onChangeShelf={onChangeShelf}/>\n                </div>\n                <div className=\"title\">{book.title}</div>\n                <div className=\"authors\">{authors}</div>\n                \n            </div>\n        </li>\n    )\n}\n\nBook.propTypes = {\n    book: PropTypes.object.isRequired,\n    onChangeShelf: PropTypes.func.isRequired\n}\nexport default Book;","import React from 'react';\nimport Book from './Book';\nimport PropTypes from 'prop-types';\n\nconst Bookshelf = props => {\n    const {type, books, onChangeShelf} = props;\n    return (\n        <div className=\"book_shelf\">\n            <h2 className=\"shelf_name\">{type}</h2>\n            {books.length <= 0 ? (\n                <div className=\"empty\">No books at present in this shelf.</div>\n            ): (\n                <ol className=\"books\">\n                    {books.map( book => (\n                        <Book \n                            key={book.id}\n                            book={book}\n                            onChangeShelf={onChangeShelf}\n                        />\n                    ))}\n                </ol>\n            )}\n        </div>\n    )\n}\n\nBookshelf.propTypes = {\n    type: PropTypes.string.isRequired,\n    books: PropTypes.array.isRequired,\n    onChangeShelf: PropTypes.func.isRequired\n}\nexport default Bookshelf;\n","\nconst api = \"https://reactnd-books-api.udacity.com\"\n\n\n// Generate a unique token for storing your bookshelf data on the backend server.\nlet token = localStorage.token\nif (!token)\n  token = localStorage.token = Math.random().toString(36).substr(-8)\n\nconst headers = {\n  'Accept': 'application/json',\n  'Authorization': token\n}\n\nexport const get = (bookId) =>\n  fetch(`${api}/books/${bookId}`, { headers })\n    .then(res => res.json())\n    .then(data => data.book)\n\nexport const getAll = () =>\n  fetch(`${api}/books`, { headers })\n    .then(res => res.json())\n    .then(data => data.books)\n\nexport const update = (book, shelf) =>\n  fetch(`${api}/books/${book.id}`, {\n    method: 'PUT',\n    headers: {\n      ...headers,\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({ shelf })\n  }).then(res => res.json())\n\nexport const search = (query, maxResults) =>\n  fetch(`${api}/search`, {\n    method: 'POST',\n    headers: {\n      ...headers,\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({ query, maxResults })\n  }).then(res => res.json())\n    .then(data => data.books)\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Book from './Book';\nimport { Link } from 'react-router-dom';\nimport * as api from '../api/booksAPI';\nimport { throttle } from 'lodash'\nclass Search extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.handleInputThrottled = throttle(this.updateQuery, 100)\n\t}\n\tstate = {\n\t\tquery: '',\n\t\tsearchedBooks: [],\n\t\tisSearching: false,\n\t\terror: false\n\t};\n\n\tupdateQuery = event => {\n\t\tthis.setState({ query: event.target.value }, () => {\n\t\t\tthis.searchBooks(event);\n\t\t});\n\t};\n\n\tsearchBooks = () => {\n\t\tconst { query } = this.state;\n\n\t\tif (query) {\n\t\t\tthis.setState({ isSearching: true });\n\t\t\tapi.search(query).then(res => {\n\t\t\t\tif (res.error) {\n\t\t\t\t\tthis.setState({ searchedBooks: [], isSearching: false, error: true });\n\t\t\t\t} else if (res) {\n\t\t\t\t\tthis.setState({ error: false });\n\t\t\t\t\tthis.updateBooks(res);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tthis.setState({ searchedBooks: [] });\n\t\t}\n\t};\n\n\tupdateBooks = books => {\n\t\tconst { shelvedBooks } = this.props;\n\t\tfor (const book of books) {\n\t\t\tbook.shelf = 'none';\n\t\t\tfor (let shelvedBook of shelvedBooks) {\n\t\t\t\tif (book.id === shelvedBook.id) book.shelf = shelvedBook.shelf;\n\t\t\t}\n\t\t}\n\n\t\tthis.setState({\n\t\t\tsearchedBooks: books,\n\t\t\tisSearching: false\n\t\t});\n\t};\n\n\tupdateBook = books => {\n\t\tconst {searchedBooks} = this.state;\n\t\tfor (const book of searchedBooks) {\n\t\t\tfor (const shelvedBook of books) {\n\t\t\t\tif (book.id === shelvedBook.id) book.shelf = shelvedBook.shelf;\n\t\t\t}\n\t\t}\n\n\t\tthis.setState({ searchedBooks });\n\t};\n\n\tchangeShelf = (book, event) => {\n\t\tthis.props.onChangeShelf(book, event).then(books => this.updateBook(books));\n\t};\n\n\trender() {\n\t\tconst { searchedBooks } = this.state;\n\n\t\treturn (\n\t\t\t<div className=\"search\">\n\t\t\t\t<div className=\"search_bar\">\n\t\t\t\t\t<Link to=\"/\" className=\"back\">\n\t\t\t\t\t\tClose\n\t\t\t\t\t</Link>\n\t\t\t\t\t<div className=\"input_container\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tvalue={this.state.query}\n\t\t\t\t\t\t\tplaceholder=\"Search by title or author\"\n\t\t\t\t\t\t\t// onChange={event => this.updateQuery(event)}\n\t\t\t\t\t\t\tonChange={this.handleInputThrottled}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t{ this.state.error && !this.state.isSearching && (\n\t\t\t\t\t<div className=\"results center\">\n\t\t\t\t\t\t<h3>No Results Found</h3>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t{this.state.isSearching ? (\n\t\t\t\t\t<div className=\"loader\" />\n\t\t\t\t) : (\n\t\t\t\t\t<div className=\"results\">\n\t\t\t\t\t\t<ol className=\"books_grid\">\n\t\t\t\t\t\t\t{searchedBooks.map(book => (\n\t\t\t\t\t\t\t\t<Book key={book.id} book={book} onChangeShelf={this.changeShelf} />\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</ol>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nSearch.propTypes = {\n\tshelvedBooks: PropTypes.array.isRequired,\n\tonChangeShelf: PropTypes.func.isRequired\n};\n\nexport default Search;","import React, { Component } from 'react';\nimport { Route, Link } from 'react-router-dom';\nimport Bookshelf from './components/Bookshelf';\nimport Search from './components/Search';\nimport * as api from './api/booksAPI';\n\nimport './App.css';\n\nclass App extends Component {\n\n  state = {\n    books: [],\n  };\n\n  async componentDidMount() {\n   const res = await api.getAll();\n      this.setState({\n        books: res,\n      });\n  \n  }\n\n  shelfChange = (book, e) => {\n    return new Promise(resolve => {\n      api.update(book, e.target.value).then(res => {\n        api.getAll().then(res => {\n          this.setState({ books: res },\n            resolve(res)\n          );\n        });\n      });\n    });\n  };\n\n  render() {\n    const { books } = this.state;\n    return (\n      <div className=\"App\">\n\n        <Route\n          exact\n          path=\"/\"\n          render={() => (\n            <>\n            <div className=\"list_books\">\n              <div className=\"app_header\">\n                <h1>MyReads</h1>\n              </div>\n              <Bookshelf\n                type=\"Currently Reading\"\n                books={books.filter(book => book.shelf === 'currentlyReading')}\n                onChangeShelf={this.shelfChange}\n              />\n              <Bookshelf\n                type=\"Want to Read\"\n                books={books.filter(book => book.shelf === 'wantToRead')}\n                onChangeShelf={this.shelfChange}\n              />\n              <Bookshelf\n                type=\"Read\"\n                books={books.filter(book => book.shelf === 'read')}\n                onChangeShelf={this.shelfChange}\n              />\n            </div>\n            <div className=\"add_book\">\n              <Link to=\"/search\">Add Book</Link>\n            </div>\n            </>\n          )} />\n        <Route\n          path=\"/search\"\n          render={() => <Search shelvedBooks={books} onChangeShelf={this.shelfChange} />}\n        />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport {HashRouter} from 'react-router-dom';\n\nReactDOM.render(\n  <React.StrictMode>\n    <HashRouter>\n      <App />\n    </HashRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}